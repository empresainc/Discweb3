<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Discover Cloud — App Android de Infraestrutura Profissional</title>
  <meta name="description" content="App Discover Cloud para Android com login Google obrigatório, infraestrutura premium, anúncios em destaque e planos flexíveis para mídia patrocinada e cloud profissional." />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="application-name" content="Discover Cloud" />
  <meta name="theme-color" content="#0b122a" />

  <!-- Open Graph / SEO -->
  <meta property="og:title" content="Discover Cloud — App Android de Infraestrutura Profissional" />
  <meta property="og:description" content="Experiência mobile Discover Cloud: login Google, mídia patrocinada premium, deploy cloud seguro e planos sob medida." />
  <meta property="og:image" content="https://i.ibb.co/21HWwywW/Gemini-Generated-Image-47non947non947no.png" />
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="pt_BR" />

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Poppins:wght@600;800&display=swap" rel="stylesheet" />

  <!-- Particles + Google Identity Services -->
  <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
  <script src="https://accounts.google.com/gsi/client" async defer></script>

  <style>
    :root{
      --brand:#4f8cff; --brand-2:#00d2ff; --accent:#ff9d45; --accent-2:#ff6fb2;
      --text-100:#fff; --text-300:#c7d3ff; --text-500:#9aa7d4; --text-700:#5a678f;
      --border:rgba(79,140,255,.16);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%}
    body{
      font-family:'Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif;
      color:var(--text-100);
      background:
        radial-gradient(1200px 800px at 10% 10%, #111a3b 0%, #0b1129 40%, #050814 80%),
        radial-gradient(900px 700px at 90% -10%, #0d1533 0%, rgba(5,8,20,1) 70%);
      overflow-x:hidden;
      min-height:100svh; /* evita “corte” em Android */
    }

    /* decor */
    #particles-js{position:fixed; inset:0; z-index:-2;}
    .bg-blobs{position:fixed; inset:0; pointer-events:none; z-index:-3;}
    .blob{position:absolute; filter:blur(120px); opacity:.35; border-radius:50%;}
    .blob.b1{width:560px;height:560px; background:#4f8cff; top:-160px; left:-120px;}
    .blob.b2{width:520px;height:520px; background:#7c4dff; bottom:-160px; right:-120px;}
    .blob.b3{width:420px;height:420px; background:#00d2ff; top:40%; left:70%; opacity:.22;}
    .clouds{position:fixed; inset:0; z-index:-1; overflow:hidden; opacity:.25;}
    .cloud{position:absolute; left:-40%; width:180%; height:220px; background:radial-gradient(closest-side, rgba(255,255,255,.14), rgba(255,255,255,0)); filter:blur(20px); animation:drift 38s linear infinite;}
    .cloud.c2{top:22%; animation-duration:54s; opacity:.35;}
    .cloud.c3{top:58%; animation-duration:46s; opacity:.3;}
    @keyframes drift{0%{transform:translateX(0)}100%{transform:translateX(40%)}}

    /* container app (mobile-first / WebView-safe) */
    .app-shell{
      width:100%;
      max-width:520px;
      margin-inline:auto;
      min-height:100svh;
      display:flex; flex-direction:column;
      background:rgba(6,10,28,.84);
      border-left:1px solid var(--border); border-right:1px solid var(--border);
      backdrop-filter:blur(18px);
    }

    header{
      position:sticky; top:0; z-index:10;
      padding:12px 16px calc(12px + env(safe-area-inset-top,0));
      background:linear-gradient(180deg, rgba(12,18,44,.92), rgba(6,10,26,.82));
      border-bottom:1px solid var(--border);
      display:flex; flex-direction:column; gap:10px;
    }
    .nav{display:flex; flex-direction:column; gap:10px;}
    .brand{display:flex; align-items:center; gap:12px; font-family:'Poppins'; font-weight:800}
    .brand img{width:40px;height:40px;border-radius:12px}
    nav ul{display:flex; gap:8px; list-style:none; flex-wrap:wrap}
    nav a{color:var(--text-300); font-weight:600; font-size:.82rem; padding:8px 12px; border-radius:999px; background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);}
    .actions{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .btn{display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 16px; border-radius:999px; font-weight:700; font-size:.92rem; border:1px solid var(--border); color:var(--text-300); background:rgba(255,255,255,.05)}
    .btn-primary{background:linear-gradient(135deg, var(--brand), var(--brand-2)); color:#06102b; border:none}
    .btn-accent{background:linear-gradient(135deg, var(--accent), var(--accent-2)); color:#140b1f; border:none}
    .btn-ghost{border:1px solid rgba(79,140,255,.35); color:var(--text-300); background:rgba(255,255,255,.05)}
    .welcome-chip{display:none; align-items:center; gap:8px; padding:8px 14px; border-radius:999px; background:rgba(79,140,255,.16); color:var(--text-100); font-weight:700; border:1px solid rgba(79,140,255,.28)}
    .welcome-chip.active{display:inline-flex}

    main{flex:1; padding:14px; display:flex; flex-direction:column; gap:18px}
    .section-title{font-family:'Poppins'; font-size:1.8rem; text-align:center}
    .section-sub{color:var(--text-500); text-align:center; max-width:640px; margin:0 auto; line-height:1.7}

    /* hero compacto */
    .hero{border:1px solid var(--border); border-radius:18px; padding:16px; background:linear-gradient(160deg, rgba(11,16,34,.96), rgba(14,20,41,.9));}
    .eyebrow{display:inline-flex; gap:8px; padding:6px 10px; border-radius:999px; font-size:.72rem; letter-spacing:.14em; text-transform:uppercase; background:rgba(79,140,255,.16); color:#bfe2ff; border:1px solid rgba(79,140,255,.28)}
    .headline{font-family:'Poppins'; font-size:clamp(1.8rem,6vw,2.4rem); line-height:1.12; margin:8px 0}
    .headline .grad{-webkit-background-clip:text; -webkit-text-fill-color:transparent; background:linear-gradient(120deg, var(--brand), var(--accent), var(--brand-2))}
    .sub{color:var(--text-300); line-height:1.6}

    /* cards / grids */
    .grid-3{display:grid; grid-template-columns:1fr; gap:12px}
    .f-card{border:1px solid var(--border); border-radius:14px; padding:14px; background:rgba(255,255,255,.04)}
    .f-ico{width:40px;height:40px; border-radius:12px; background:rgba(79,140,255,.15); display:grid; place-items:center; margin-bottom:8px}

    /* ads */
    .ads{padding:24px 0 10px}
    .ads-grid{display:grid; grid-template-columns:1fr; gap:14px}
    .ads-card{position:relative; border-radius:16px; overflow:hidden; background:rgba(8,12,26,.82); border:1px solid var(--border)}
    .ads-card img{width:100%; height:180px; object-fit:cover}
    .ads-card-content{padding:12px}
    .ads-card strong{font-family:'Poppins'; font-size:1.06rem}
    .ads-pill-group{display:flex; gap:6px; flex-wrap:wrap; margin-top:6px}
    .ads-pill{padding:4px 8px; border-radius:999px; background:rgba(255,255,255,.12); font-size:.72rem}

    /* pricing */
    .pricing{padding:8px 0 8px}
    .pricing-grid{display:grid; grid-template-columns:1fr; gap:12px}
    .price-card{border:1px solid var(--border); border-radius:16px; padding:16px; background:rgba(9,14,28,.92)}
    .pc-tag{display:inline-flex; gap:6px; padding:6px 10px; border-radius:999px; font-size:.72rem; letter-spacing:.12em; text-transform:uppercase; background:rgba(79,140,255,.18); color:#bfe2ff}
    .pc-title{font-family:'Poppins'; font-size:1.28rem; margin:6px 0}
    .pc-price{font-size:1.8rem; font-weight:800}
    .pc-price span{font-size:.9rem; color:var(--text-500); margin-left:6px}
    .pc-list{list-style:none; display:grid; gap:8px; margin:12px 0 14px}
    .pc-list li{display:flex; gap:8px; color:var(--text-300)}
    .pc-list li::before{content:'✔'; color:#4adf86; font-weight:800}

    /* FAQ / CTA / Footer resumidos */
    .faq-list{display:grid; gap:10px}
    .faq-item{background:rgba(10,15,32,.88); border:1px solid var(--border); border-radius:12px; padding:12px}
    .cta-card{border-radius:16px; background:linear-gradient(140deg, rgba(13,22,46,.92), rgba(10,14,30,.92)); border:1px solid var(--border); padding:18px; text-align:center; display:grid; gap:10px}
    footer{background:rgba(5,8,18,.9); border-top:1px solid var(--border); padding:16px}
    .footer-grid{display:grid; gap:10px}
    .footer-links{display:flex; gap:10px; flex-wrap:wrap}
    .footer-meta{margin-top:8px; color:var(--text-700); font-size:.82rem; display:flex; gap:12px; justify-content:space-between; flex-wrap:wrap}

    /* AUTH GATE (fullscreen, sem corte) */
    body.auth-locked{overflow:hidden}
    #auth-gate{position:fixed; inset:0; z-index:200; display:grid; place-items:center; padding:16px; background:radial-gradient(1200px 900px at 20% 20%, rgba(79,140,255,.2), rgba(5,8,20,.95) 60%); backdrop-filter:blur(14px)}
    #auth-gate.hidden{display:none}
    .auth-card{width:100%; max-width:420px; background:rgba(9,14,32,.94); border:1px solid rgba(79,140,255,.2); border-radius:22px; padding:18px; display:grid; gap:12px; text-align:center}
    #google-signin{display:flex; justify-content:center; min-height:44px}
    #auth-error{display:none; color:#ffb37a; font-weight:700}

    /* util */
    .hidden{opacity:0; transform:translateY(14px)}
    .reveal{opacity:1 !important; transform:none !important; transition:opacity .45s ease, transform .45s ease}
    a{text-decoration:none; color:inherit}
    img{max-width:100%; display:block}

    @media (min-width:768px){
      .grid-3{grid-template-columns:repeat(3,1fr)}
      .ads-grid{grid-template-columns:repeat(2,1fr)}
      .pricing-grid{grid-template-columns:repeat(2,1fr)}
    }
    @media (prefers-reduced-motion: reduce){
      *,*::before,*::after{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}
      .cloud{animation:none}
    }
  </style>
</head>
<body class="auth-locked">
  <!-- fundo decorativo -->
  <div id="particles-js" aria-hidden="true"></div>
  <div class="bg-blobs" aria-hidden="true">
    <div class="blob b1"></div><div class="blob b2"></div><div class="blob b3"></div>
  </div>
  <div class="clouds" aria-hidden="true"><div class="cloud c1"></div><div class="cloud c2"></div><div class="cloud c3"></div></div>

  <!-- AUTH -->
  <div id="auth-gate" role="dialog" aria-modal="true" aria-labelledby="auth-title" aria-describedby="auth-desc">
    <div class="auth-card">
      <div class="brand" style="justify-content:center">
        <img src="https://i.ibb.co/21HWwywW/Gemini-Generated-Image-47non947non947no.png" alt="Discover Cloud" />
        <span>Discover Cloud</span>
      </div>
      <h2 id="auth-title">Entre com Google para acessar</h2>
      <p id="auth-desc" style="color:var(--text-300)">Compatível com Android/WebView. Se o popup for bloqueado, use o fallback abaixo.</p>

      <div id="google-signin" aria-live="polite"></div>
      <button id="google-onetap" type="button" class="btn btn-ghost" style="justify-self:center">Tentar sem popup (One Tap)</button>

      <p id="auth-error" role="alert"></p>
      <small style="color:var(--text-500)">Continuar implica concordar com nossa <a href="#faq" style="color:var(--text-300); font-weight:700">política de privacidade</a>.</small>
    </div>
  </div>

  <!-- APP -->
  <div class="app-shell">
    <header>
      <div class="container nav">
        <a class="brand" href="#topo"><img src="https://i.ibb.co/21HWwywW/Gemini-Generated-Image-47non947non947no.png" alt="Discover Cloud" /><span>Discover Cloud</span></a>
        <nav aria-label="Navegação principal">
          <ul>
            <li><a href="#servicos">Serviços</a></li>
            <li><a href="#anuncios">Anúncios</a></li>
            <li><a href="#arquitetura">Arquitetura</a></li>
            <li><a href="#planos">Planos</a></li>
            <li><a href="#faq">FAQ</a></li>
          </ul>
        </nav>
        <div class="actions">
          <span id="welcomeMessage" class="welcome-chip" role="status" aria-live="polite"></span>
          <a class="btn-ghost btn" href="https://picking-springfield-installing-romance.trycloudflare.com/" target="_blank" rel="noopener">Painel</a>
          <button id="logoutButton" class="btn btn-ghost" type="button" style="display:none">Sair</button>
          <a class="btn-accent btn" href="#anuncios">Anuncie aqui</a>
          <a class="btn-primary btn" href="#planos">Ver planos</a>
        </div>
      </div>
    </header>

    <main id="topo">
      <!-- HERO -->
      <section class="hero">
        <span class="eyebrow">Cloud Native • Segurança • Escala</span>
        <h1 class="headline">Infraestrutura <span class="grad">profissional</span> para Android</h1>
        <p class="sub">Ambientes prontos em minutos, observabilidade completa, zero downtime e suporte 24/7.</p>
        <div style="display:flex; gap:10px; margin-top:10px; flex-wrap:wrap">
          <a class="btn btn-primary" href="https://picking-springfield-installing-romance.trycloudflare.com/" target="_blank" rel="noopener">Começar agora</a>
          <a class="btn btn-ghost" href="#planos">Planos e preços</a>
        </div>
      </section>

      <!-- TRUST -->
      <section class="faq-list" aria-label="Clientes e parceiros">
        <div class="faq-item"><h4>Confiança</h4><p style="color:var(--text-300)">Escolhida por scale-ups, fintechs e equipes globais que exigem segurança e performance.</p></div>
      </section>

      <!-- FEATURES -->
      <section id="servicos">
        <h2 class="section-title">Plataforma completa</h2>
        <p class="section-sub">Ferramentas poderosas e UX refinada para engenharia, produto e operações.</p>
        <div class="grid-3">
          <article class="f-card"><div class="f-ico">⚡</div><h3>CI/CD</h3><p style="color:var(--text-300)">Deploy com rollback 1-clique.</p></article>
          <article class="f-card"><div class="f-ico">🛡️</div><h3>Segurança</h3><p style="color:var(--text-300)">WAF, isolamento e TLS automático.</p></article>
          <article class="f-card"><div class="f-ico">🌐</div><h3>Edge</h3><p style="color:var(--text-300)">CDN premium e baixa latência.</p></article>
          <article class="f-card"><div class="f-ico">📊</div><h3>Observabilidade</h3><p style="color:var(--text-300)">Métricas em tempo real e APM.</p></article>
          <article class="f-card"><div class="f-ico">🤝</div><h3>Suporte 24/7</h3><p style="color:var(--text-300)">SLA dedicado e playbooks.</p></article>
          <article class="f-card"><div class="f-ico">🚀</div><h3>Escala</h3><p style="color:var(--text-300)">Autoscaling e otimização de custos.</p></article>
        </div>
      </section>

      <!-- ADS -->
      <section id="anuncios" class="ads">
        <h2 class="section-title">Anúncios em destaque</h2>
        <p class="section-sub">Vitrine premium com trailers e lançamentos.</p>
        <div class="ads-grid">
          <article class="ads-card">
            <img src="https://ticketdirect.co.nz/wp-content/uploads/2025/09/it-welcome-to-derry-estreno-02.jpg" alt="HBO Max - Welcome to Derry"/>
            <div class="ads-card-content">
              <strong>HBO Max • Welcome to Derry</strong>
              <div class="ads-pill-group"><span class="ads-pill">Streaming</span><span class="ads-pill">Terror</span></div>
              <a href="https://youtu.be/oKa6u7LT0qE" target="_blank" rel="noopener" style="position:absolute; inset:0"></a>
            </div>
          </article>
          <article class="ads-card">
            <img src="https://i.ytimg.com/vi/vxYwWVDsI2k/maxresdefault.jpg" alt="Missão Secreta"/>
            <div class="ads-card-content">
              <strong>Missão Secreta</strong>
              <div class="ads-pill-group"><span class="ads-pill">Blockbuster</span><span class="ads-pill">Ação</span></div>
              <a href="https://youtu.be/bd_5HcTujfc" target="_blank" rel="noopener" style="position:absolute; inset:0"></a>
            </div>
          </article>
        </div>
      </section>

      <!-- PRICING -->
      <section id="planos" class="pricing">
        <h2 class="section-title">Planos flexíveis</h2>
        <p class="section-sub">Do MVP à escala global.</p>
        <div class="pricing-grid">
          <article class="price-card">
            <div class="pc-tag">Start</div>
            <div class="pc-title">Free 48h</div>
            <div class="pc-price">R$ 0<span>/48 horas</span></div>
            <ul class="pc-list">
              <li>Deploy com templates</li>
              <li>Monitoramento básico</li>
              <li>Ambiente isolado</li>
              <li>Suporte por e-mail</li>
            </ul>
            <a class="btn btn-ghost" href="https://picking-springfield-installing-romance.trycloudflare.com/" target="_blank" rel="noopener">Usar grátis</a>
          </article>

          <article class="price-card">
            <div class="pc-tag">Mais popular</div>
            <div class="pc-title">Premium</div>
            <div class="pc-price">R$ 165<span>/mês</span></div>
            <ul class="pc-list">
              <li>Ambiente dedicado</li>
              <li>Observabilidade avançada</li>
              <li>Suporte 24/7</li>
              <li>Compliance e auditoria</li>
            </ul>
            <a class="btn btn-primary" href="#faq">Assinar</a>
          </article>
        </div>
      </section>

      <!-- FAQ / CTA -->
      <section id="faq" class="faq">
        <h2 class="section-title">FAQ</h2>
        <div class="faq-list">
          <div class="faq-item"><h4>Preciso ter conta Google?</h4><p style="color:var(--text-300)">Sim, o login é via Google (SSO).</p></div>
          <div class="faq-item"><h4>Popup bloqueado?</h4><p style="color:var(--text-300)">Toque em “Tentar sem popup (One Tap)” ou permita popups para este domínio.</p></div>
        </div>
      </section>

      <section class="cta">
        <div class="cta-card">
          <h2>Pronto para escalar?</h2>
          <p style="color:var(--text-300)">Faça login e inicie seu primeiro deploy em minutos.</p>
          <a class="btn btn-primary" href="#topo">Voltar ao topo</a>
        </div>
      </section>
    </main>

    <footer id="contato">
      <div class="footer-grid">
        <div>
          <div class="brand"><img src="https://i.ibb.co/21HWwywW/Gemini-Generated-Image-47non947non947no.png" alt="Discover Cloud" /><span>Discover Cloud</span></div>
          <p style="color:var(--text-500); margin-top:6px">Infraestrutura em nuvem profissional para times que exigem segurança e escala.</p>
        </div>
        <div class="footer-links">
          <a href="#servicos">Serviços</a>
          <a href="#planos">Planos</a>
          <a href="mailto:discovervs24@gmail.com">Contato</a>
        </div>
        <div class="footer-meta">
          <span>© <span id="year"></span> Discover Cloud</span>
          <span>Privacidade</span>
        </div>
      </div>
    </footer>
  </div>

  <script>
    /* ====== CONFIG ====== */
    const CLIENT_ID = "1094888827715-pn7tdvs4dhjclj13iefh48f90met93al.apps.googleusercontent.com";
    const STORAGE_KEY = "discover.auth";

    /* ====== HELPERS ====== */
    const $ = (s)=>document.querySelector(s);
    function setError(m){ const e=$("#auth-error"); if(!e) return; e.textContent=m||""; e.style.display=m?"block":"none"; }
    function decodeJwt(t){ try{const p=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/");return JSON.parse(decodeURIComponent(atob(p).split("").map(c=>"%"+("00"+c.charCodeAt(0).toString(16)).slice(-2)).join("")));}catch{return {};}}
    function saveSession({token,profile}){ localStorage.setItem(STORAGE_KEY, JSON.stringify({token,profile,ts:Date.now()})); }
    function readSession(){ try{ return JSON.parse(localStorage.getItem(STORAGE_KEY)||"null"); }catch{ return null; } }
    function clearSession(){ localStorage.removeItem(STORAGE_KEY); }
    function lockUI(v){ document.body.classList.toggle("auth-locked", !!v); $("#auth-gate")?.classList.toggle("hidden", !v); }
    function updateWelcome(profile){
      const chip=$("#welcomeMessage"), lo=$("#logoutButton");
      if(profile){ chip.innerHTML=`👋 Olá, <strong>${profile.name||profile.email}</strong>`; chip.classList.add("active"); lo.style.display="inline-flex"; }
      else{ chip.textContent=""; chip.classList.remove("active"); lo.style.display="none"; }
    }

    /* ====== GOOGLE ID ====== */
    function handleCredentialResponse(resp){
      if(!resp?.credential){ setError("Não foi possível obter a credencial do Google."); return; }
      const token=resp.credential, payload=decodeJwt(token);
      const profile={ sub:payload.sub, email:payload.email, name:payload.name||payload.given_name||"", picture:payload.picture||"" };
      saveSession({token,profile}); updateWelcome(profile); lockUI(false); setError("");
      console.assert(!!profile.sub,"ID ausente"); console.assert(token.length>10,"Token inválido");
    }

    function initGSI(){
      if(!CLIENT_ID){ setError("CLIENT_ID não definido."); return; }
      if(!(window.google&&google.accounts&&google.accounts.id)){ setTimeout(initGSI,120); return; }

      google.accounts.id.initialize({
        client_id: CLIENT_ID,
        callback: handleCredentialResponse,
        ux_mode: "popup",             // popup (melhor no GitHub Pages); fallback One Tap abaixo
        auto_select: false,
        context: "signin",
        use_fedcm_for_prompt: true
      });

      const btn = $("#google-signin");
      if(btn){
        google.accounts.id.renderButton(btn,{
          type:"standard", theme:"outline", size:"large", text:"continue_with", shape:"pill", logo_alignment:"left", width:280
        });
      }

      const oneTap = $("#google-onetap");
      oneTap?.addEventListener("click", ()=>{
        setError("");
        try{
          google.accounts.id.prompt(n=>{
            if(n.isNotDisplayed()||n.isSkippedMoment()){
              setError("One Tap não pôde ser exibido. Permita popups ou use o botão principal.");
              console.warn("OneTap:", n.getNotDisplayedReason?.(), n.getSkippedReason?.());
            }
          });
        }catch(e){ setError("Falha ao tentar One Tap."); console.error(e); }
      });
    }

    async function logout(){
      const sess=readSession(); clearSession(); updateWelcome(null); lockUI(true);
      if(window.google?.accounts?.id){
        google.accounts.id.disableAutoSelect();
        if(sess?.profile?.email){ google.accounts.id.revoke(sess.profile.email, ()=>{}); }
      }
    }

    /* ====== UI FX ====== */
    function initParticles(){
      if(!window.particlesJS) return;
      particlesJS("particles-js",{
        particles:{ number:{value:36}, color:{value:"#4f8cff"}, shape:{type:"circle"}, opacity:{value:.3}, size:{value:3,random:true},
          line_linked:{enable:true,distance:140,color:"#7c4dff",opacity:.2,width:1},
          move:{enable:true,speed:1.1,random:true,out_mode:"out"} },
        interactivity:{ detect_on:"canvas", events:{onhover:{enable:true,mode:"grab"}, resize:true},
          modes:{grab:{distance:120,line_linked:{opacity:.3}}}}, retina_detect:true
      });
    }
    function initReveal(){
      const io=new IntersectionObserver(es=>es.forEach(e=>{if(e.isIntersecting){e.target.classList.add("reveal"); io.unobserve(e.target);}}),{threshold:.14});
      document.querySelectorAll(".hidden").forEach(el=>io.observe(el));
    }

    /* ====== BOOT ====== */
    document.addEventListener("DOMContentLoaded", ()=>{
      const y=$("#year"); if(y) y.textContent=new Date().getFullYear();
      $("#logoutButton")?.addEventListener("click", logout);

      const s=readSession();
      if(s?.profile){ updateWelcome(s.profile); lockUI(false); }

      initParticles(); initReveal(); initGSI();
    });

    // Mensagem amigável se o navegador bloquear o popup
    window.addEventListener("error",(e)=>{
      const m=String(e?.message||"");
      if(m.includes("Failed to open popup")) setError("Popup bloqueado. Use 'Tentar sem popup (One Tap)' ou permita popups para este domínio.");
    });
  </script>
</body>
</html>
